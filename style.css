
/* ==================================== */
/* 0. 基礎設置 & 移動端優先 */
/* ==================================== */
:root {
    /* 顏色板：柔和溫暖的色調 */
    --color-cream: #fbf9f4; /* 主背景 */
    --color-soft-brown: #a0847b; /* 文字或深色元素 */
    --color-muted-red: #c08484; /* 重點/貼紙 */
    --color-dusty-pink: #e4c2c7; /* 輔助色 */
    --color-paper: #ffffff; /* 內容紙張顏色 */

    /* ... 其他顏色 ... */
    --font-serif: 'Playfair Display', serif; 
    --font-sans: 'Roboto', sans-serif; 
    --font-handwritten: 'Patrick Hand', cursive; /* <--- 換成這個可愛的新字型 */
    
    /* 報紙紋理的基礎設定 (使用偽元素或背景圖實現) */
    --newspaper-texture-url: url('path/to/subtle-newspaper-texture.png'); /* 替換為實際的報紙紋理圖片 */
}
/* ==================================== */
/* 0. 動畫基礎：初始隱藏狀態 (適用於所有頁面) */
/* ==================================== */

.collage-element,
#intro-title,
.photo-container,
#message-text,
/* #animation-text-container,  <--- 我們把它移除了 */
.hand-drawn-cake {
    opacity: 0;
    transform: translateY(20px); 
    transition: opacity 0.8s ease-out, transform 0.8s ease-out;
}
/* ==================================== */
/* 1. Page 1 動畫：淡入與標題浮動 */
/* ==================================== */

/* * 步驟 1：(您剛剛已完成) 
 * 初始狀態 (隱藏) 
 * transition 屬性會自動應用於變化
 */
#intro-title {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.8s ease-out, transform 0.8s ease-out;
}
/* (您可能還有 .collage-element, .photo-container 等等...
   我們這裡先專注於 #intro-title) */


/* * 步驟 2：(您現在需要加入的) 
 * 最終狀態 (顯示) 
 * 當 JS 加上 .is-active 時觸發
 */
#page-1.is-active #intro-title {
    opacity: 1;
    transform: translateY(0);
}


/* * 步驟 3：(您也需要加入的) 
 * 標題微浮動 (Slight Floating Effect) 
 */

/* 3.1 定義動畫 */
@keyframes softFloat {
    0% { transform: translateY(0) scale(1); }
    50% { transform: translateY(-5px) scale(1.01); }
    100% { transform: translateY(0) scale(1); }
}

/* 3.2 套用動畫到標題上 */
#page-1.is-active #intro-title {
    /* * 這裡的 "animation" 會疊加在上面的 "transform" 上
     * 0.8s 是延遲，等淡入 (0.8s) 結束後才開始浮動
     */
    animation: softFloat 4s ease-in-out infinite 0.8s; 
}
/* ==================================== */
/* 2. Page 2 動畫：照片滑入與貼紙輕彈 */
/* ==================================== */

/* 2.1 初始狀態 (隱藏) */
/* (我們在 "0. 動畫基礎" 裡已經設定了 .photo-container 的 opacity: 0 和 transform: translateY(20px)) */
/* 這裡我們可以為照片指定不同的「滑入」起始位置 */

#page-2 .photo-1 {
    /* 從左側滑入並帶有旋轉 */
    opacity: 0;
    transform: translateX(-30px) rotate(-15deg);
    transition: opacity 0.6s ease-out, transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

#page-2 .photo-2 {
    /* 從右側滑入並帶有旋轉 */
    opacity: 0;
    transform: translateX(30px) rotate(15deg);
    transition: opacity 0.6s ease-out, transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* 貼紙和塗鴉的初始狀態 (輕微縮小) */
#page-2 .collage-element,
#page-2 .doodle {
    opacity: 0;
    transform: scale(0.8);
    transition: opacity 0.5s ease-out, transform 0.5s ease-out;
}


/* 2.2 最終狀態 (顯示)：當頁面激活時 */

/* 照片滑入 */
#page-2.is-active .photo-1,
#page-2.is-active .photo-2 {
    opacity: 1;
    transform: translateX(0) rotate(0); /* 歸位 */
}

/* 貼紙輕彈 (Stickers pop gently) */
@keyframes popGently {
    0% { transform: scale(0.8); }
    70% { transform: scale(1.05); } /* 稍微彈過頭 */
    100% { transform: scale(1); } /* 恢復正常 */
}

/* 套用 pop 動畫到貼紙和塗鴉上 */
#page-2.is-active .collage-element,
#page-2.is-active .doodle {
    opacity: 1;
    animation: popGently 0.5s ease-out forwards;
}


/* 2.3 錯開動畫時間 (Stagger Animation) */
/* 讓動畫一個接一個發生，更有手工感 */

#page-2.is-active .photo-1 {
    transition-delay: 0.1s; /* 照片 1 先動 */
}

#page-2.is-active .photo-2 {
    transition-delay: 0.3s; /* 照片 2 接著動 */
}

/* 確保您在 HTML 中有 .element-sticker-2 和 .doodle-stars */
#page-2.is-active .element-sticker-2 {
    animation-delay: 0.5s; /* 貼紙最後動 */
}

#page-2.is-active .doodle-stars {
     animation-delay: 0.6s;
}
/* ==================================== */
/* 3. Page 3 動畫：文字淡出與火花 */
/* ==================================== */

/* 3.1 初始狀態 (隱藏) */
/* (我們在 "0. 動畫基礎" 裡已經設定了 #message-text 的 
   opacity: 0 和 transform: translateY(20px)) */

/* 3.2 最終狀態 (顯示)：當頁面激活時 */
#page-3.is-active #message-text {
    opacity: 1;
    transform: translateY(0);
    transition-delay: 0.2s; /* 讓文字稍微延遲一點出現 */
}

/* 3.3 小火花 (Sparkles) 動畫 */
/* 我們將使用偽元素 (::before 和 ::after) 在文字周圍創建火花 */

#page-3 #message-text {
    position: relative; /* 為了定位偽元素 */
}

/* 火花的基礎樣式 */
#page-3.is-active #message-text::before,
#page-3.is-active #message-text::after {
    content: '✨'; /* 您也可以用 '✦' 或 '・' */
    position: absolute;
    font-size: 0.8rem;
    color: var(--color-muted-red);
    opacity: 0;
    
    /* 火花動畫：淡入並輕微放大 */
    animation: sparkle 1.5s ease-out 0.8s forwards; /* 0.8s 延遲，等文字出現後 */
}

/* 兩個火花在不同位置 */
#page-3.is-active #message-text::before {
    top: -10px;
    left: 20%;
}

#page-3.is-active #message-text::after {
    bottom: -5px;
    right: 15%;
    animation-delay: 1.0s; /* 第二個火花稍晚出現 */
}

/* 定義火花動畫 */
@keyframes sparkle {
    0% {
        opacity: 0;
        transform: scale(0.5) rotate(0deg);
    }
    50% {
        opacity: 1;
        transform: scale(1.2) rotate(180deg);
    }
    100% {
        opacity: 0;
        transform: scale(1) rotate(360deg);
    }
}
/* ==================================== */
/* 4. Page 4 動畫 (新版：煙火效果) */
/* ==================================== */

/* 4.1 初始狀態 (隱藏) */

/* 4.1.1 "煙火" 文字 (word-1, word-2, word-3) */
#page-4 .animated-word {
    display: block;
    font-family: var(--font-serif);
    font-size: 2rem;
    font-weight: 700;
    text-align: center;
    color: var(--color-soft-brown);
    
    /* 初始狀態：在頁面下方 100px 且透明 */
    opacity: 0;
    transform: translateY(100px);
}

/* 4.1.2 蛋糕 (hand-drawn-cake) */
#page-4 .hand-drawn-cake {
    opacity: 0;
    transform: scale(0.9);
    /* 延遲 2.5 秒，等煙火爆完 */
    transition: opacity 1s ease-out 2.5s, transform 1s ease-out 2.5s; 
}

/* 4.1.3 蛋糕上的最終文字 (final-text-on-cake) */
#final-text-on-cake {
    position: absolute;
    top: 30%; /* 放在蛋糕中間 */
    left: 0;
    width: 100%;
    text-align: center;
    font-family: var(--font-handwritten); /* 用手寫體 */
    font-size: 1.5rem;
    color: var(--color-muted-red);
    
    opacity: 0; /* 初始隱藏 */
    transform: scale(0.8);
    /* 延遲 3.5 秒，等蛋糕出現後 */
    transition: opacity 0.8s ease-out 3.5s, transform 0.8s ease-out 3.5s;
}


/* 4.2 最終狀態 (顯示)：當頁面激活時 */

/* 我們換一個新名字和新效果 */
@keyframes flyInAndBurstParticles {
    0% { /* 飛入 */
        opacity: 0;
        transform: translateY(100px);
        text-shadow: 0 0 0 transparent;
    }
    40% { /* 到達中間 */
        opacity: 1;
        transform: translateY(0);
        text-shadow: 0 0 0 transparent;
    }
    80% { /* 停留 */
        opacity: 1;
        transform: translateY(0);
        text-shadow: 0 0 0 transparent;
    }
    100% { /* 爆開！(變成粒子) */
        opacity: 0;
        transform: translateY(-20px) scale(1.1); /* 稍微往上彈 */
        
        /* 這是粒子效果：8 個陰影往不同方向飛散 */
        /* 您可以調整顏色 (var(--color...)) 來改變粒子的顏色 */
        text-shadow: 
            -30px -30px 1px var(--color-muted-red), 
             30px  30px 1px var(--color-soft-brown),
            -30px  30px 1px var(--color-dusty-pink),
             30px -30px 1px var(--color-muted-red),
            -50px   0px 1px var(--color-soft-brown),
             50px   0px 1px var(--color-dusty-pink),
              0px -50px 1px var(--color-muted-red),
              0px  50px 1px var(--color-soft-brown);
    }
}

#page-4.is-active .animated-word {
    animation: flyInAndBurstParticles 2.5s ease-out forwards; /* <-- 改成新動畫名稱 */
}

/* 4.2.3 錯開三個單詞的時間 (Animation Delay) */
#page-4.is-active #word-1 {
    animation-delay: 0s; /* happy */
}
#page-4.is-active #word-2 {
    animation-delay: 0.5s; /* birthday */
}
#page-4.is-active #word-3 {
    animation-delay: 1.0s; /* to you */
}


/* 4.2.4 蛋糕出現 */
#page-4.is-active .hand-drawn-cake {
    opacity: 1;
    transform: scale(1);
    /* (發光動畫可以保留，如果有的話) */
    animation: slowGlow 3s ease-in-out infinite 3.5s; /* 延遲 3.5s 開始發光 */
}

/* 4.2.5 最終文字出現 */
#page-4.is-active #final-text-on-cake {
    opacity: 1;
    transform: scale(1);
}

/* (如果 slowGlow 動畫定義不存在，請保留這段) */
@keyframes slowGlow {
    0% {
        box-shadow: 0 0 5px 0px rgba(160, 132, 123, 0.3);
    }
    50% {
        box-shadow: 0 0 20px 8px rgba(160, 132, 123, 0.6);
    }
    100% {
        box-shadow: 0 0 5px 0px rgba(160, 132, 123, 0.3);
    }
}

/* 全局重置 */
* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html, body {
    width: 100%;
    height: 100%;
    overflow-x: hidden;
    scroll-behavior: smooth; /* 實現平滑過渡 */
    background-color: var(--color-cream);
    font-family: var(--font-sans);
    color: var(--color-soft-brown);
}

/* 主容器：確保在移動端佔滿屏幕且垂直排列 */
#birthday-site {
    width: 100%;
    min-height: 100vh;
}

/* 報紙紋理混合風格 - 應用於所有頁面 */
.page-section {
    width: 100vw;
    height: 100vh;
    padding: 5vh 5vw; /* 留白 */
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    overflow: hidden; /* 防止內容溢出影響滾動 */
    
    /* 報紙紋理效果：使用偽元素創建一個低透明度的紋理層 */
    &::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: var(--newspaper-texture-url); 
        background-repeat: repeat;
        opacity: 0.1; /* 保持 Minimal 和 Clean 的感覺 */
        pointer-events: none;
        z-index: -1;
    }
}

/* 內容區塊的定位 */
.content-wrapper {
    position: relative;
    width: 90%;
    max-width: 400px; /* 限制內容寬度以優化手機顯示 */
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}


/* ==================================== */
/* 1. Page 1 樣式 (Intro Page) */
/* ==================================== */
#page-1 {
    /* 保持 intro 頁面乾淨 */
    background-color: var(--color-cream); 
}

#intro-title {
    font-family: var(--font-serif);
    font-size: 3.5rem; /* 大標題 */
    font-weight: 700;
    color: var(--color-muted-red);
    text-align: center;
    letter-spacing: 2px;
}

/* 膠帶 (Tape) 樣式 - 範例 */
.element-tape-1 {
    position: absolute;
    top: 10%;
    left: 15%;
    width: 80px;
    height: 20px;
    background-color: rgba(160, 132, 123, 0.4); /* 半透明軟棕色 */
    transform: rotate(-10deg);
    z-index: 10;
}

/* 撕邊紙 (Torn Edge) 樣式 - 範例 */
.element-torn-edge {
    position: absolute;
    bottom: 5%;
    right: 5%;
    width: 100px;
    height: 40px;
    background-color: var(--color-paper);
    border: 1px dashed var(--color-soft-brown);
    clip-path: polygon(0% 0%, 100% 0%, 100% 70%, 90% 80%, 75% 65%, 50% 100%, 25% 70%, 10% 85%, 0% 70%); /* 模擬撕裂效果 */
    transform: rotate(5deg);
    z-index: 5;
}


/* ==================================== */
/* 2. Page 2 樣式 (Collage Page) */
/* ==================================== */
#page-2 {
    background-color: var(--color-dusty-pink); /* 稍微改變底色以增加層次感 */
}

.photo-container {
    position: absolute;
    width: 150px;
    height: 180px;
    background-color: var(--color-paper);
    padding: 8px; /* 模擬即時貼邊框 */
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.photo-1 {
    top: 15%;
    left: 10%;
    transform: rotate(-8deg); /* 傾斜 */
}

.photo-2 {
    bottom: 20%;
    right: 15%;
    transform: rotate(12deg); /* 傾斜 */
}

.placeholder-photo {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
}

/* 拼貼頁面中的膠帶 */
.photo-container .tape {
    position: absolute;
    width: 30px;
    height: 10px;
    background-color: rgba(228, 194, 199, 0.6); /* 柔和粉色的膠帶 */
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

.tape-top-left {
    top: -5px;
    left: 10px;
    transform: rotate(-5deg);
}

.tape-bottom-right {
    bottom: -5px;
    right: 10px;
    transform: rotate(15deg);
}

/* 塗鴉 (Doodles) */
.doodle {
    position: absolute;
    font-size: 1.2rem;
    color: var(--color-muted-red);
    font-family: var(--font-handwritten);
}

.doodle-stars {
    top: 5%;
    right: -15px;
    transform: rotate(20deg);
}

.doodle-arrow {
    bottom: -20px;
    left: 20px;
    transform: rotate(40deg);
}


/* ==================================== */
/* 3. Page 3 樣式 (Message Page) */
/* ==================================== */
#page-3 {
    /* 模擬筆記本紙張的輕薄感 */
    background-color: var(--color-paper); 
}

/* 筆記本點陣/格線背景 (使用 CSS Gradients 模擬) */
#page-3 .content-wrapper {
    /* 使用較大的尺寸讓內容區塊看起來像一張紙 */
    width: 95%; 
    height: 90%; 
    
    /* 點陣/格線紋理 */
    background-image: 
        radial-gradient(var(--color-soft-brown) 0.5px, transparent 0.5px);
    background-size: 10px 10px;
    opacity: 0.9;
    padding: 20px;
}

#message-text {
    font-family: var(--font-sans);
    font-size: 1.3rem;
    line-height: 1.8;
    text-align: center;
    padding: 20px;
    color: var(--color-soft-brown);
}


/* ==================================== */
/* 4. Page 4 樣式 (Final Page) */
/* ==================================== */
#page-4 {
    /* 極致乾淨 */
    background-color: var(--color-paper); 
}

#animation-text-container {
    position: absolute;
    top: 40%;
    font-family: var(--font-serif);
    font-size: 2rem;
    font-weight: 700;
    text-align: center;
    color: var(--color-soft-brown);
}

.animated-word {
    display: block; /* 讓每個單詞獨佔一行 */
    opacity: 0; /* 初始隱藏，等待 JS 控制動畫 */
    margin-bottom: 5px;
}

#cake-illustration-container {
    position: absolute;
    bottom: 15%;
    width: 120px;
    height: 120px;
    /* 這裡只是一個容器，蛋糕將在其中繪製 */
}

/* 簡單的 Line Art 蛋糕 Placeholder */
.hand-drawn-cake {
    width: 100px;
    height: 100px;
    border: 3px solid var(--color-soft-brown);
    border-radius: 50% 50% 5px 5px / 20% 20% 5px 5px; /* 模擬圓形蛋糕和底座 */
    background-color: var(--color-cream);
    position: relative;
    opacity: 0; /* 初始隱藏 */
}

.hand-drawn-cake::before {
    content: '';
    position: absolute;
    top: -10px;
    left: 45%;
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background-color: var(--color-muted-red); /* 櫻桃 */
    box-shadow: 0 -5px 0 var(--color-soft-brown); /* 蠟燭 */
}

/* ==================================== */
/* 5. 圖片 Placeholder 設置 */
/* ==================================== */
/* 請注意：您需要替換 `placeholder-photo-1.jpg` 和 `placeholder-photo-2.jpg` 為實際的圖片。 */
/* 如果沒有圖片，可以添加一個佔位背景色 */
.placeholder-photo {
    background-color: #ccc;
    display: block;
}

/* ==================================== */
/* 6. 動畫/過渡基礎 (JS 會控制實際的動畫) */
/* ==================================== */
.page-section {
    transition: transform 0.5s ease-in-out; /* 用於可能的頁面切換過渡 */
}
/* ==================================== */
/* 5. 全局背景粒子特效 (Ambient Particles) */
/* ==================================== */

/* 1. 粒子容器 (定位在每一頁) */
.particle-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden; /* 隱藏超出範圍的粒子 */
    pointer-events: none; /* 讓粒子可以被點穿，不影響操作 */
    z-index: 1; /* 確保在背景紋理之上，但在內容之下 */
}

/* 2. 粒子的外觀 (小光點) */
.particle {
    position: absolute;
    background-color: var(--color-soft-brown); /* 使用我們的主題色 */
    border-radius: 50%;
    
    width: 5px; /* 基礎大小 (JS會用 scale 縮放) */
    height: 5px;
    
    /* 動畫會從這裡開始 */
    bottom: -20px; /* 從螢幕底部外開始 */
    
    /* 套用動畫 (名稱, 時長, 延遲, 方式) */
    /* JS 會覆蓋時長 (duration) 和 延遲 (delay) */
    animation: floatUp linear infinite;
}

/* 3. 定義動畫：緩慢向上漂浮並左右微移 */
@keyframes floatUp {
    0% {
        /* JS 會控制初始的 scale 和 opacity */
        transform: translateY(0) translateX(0);
    }
    50% {
        /* 漂浮到一半時，向右移動 */
        transform: translateY(-50vh) translateX(15px);
    }
    100% {
        /* 漂浮出頂部 (110vh)，並向左移動 */
        transform: translateY(-110vh) translateX(-15px);
        opacity: 0; /* 在頂部消失 */
    }
}